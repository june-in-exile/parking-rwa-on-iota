{
  "version": 3,
  "sources": ["../../src/iota-names-transaction.ts"],
  "sourcesContent": ["// Copyright (c) Mysten Labs, Inc.\n// Modifications Copyright (c) 2025 IOTA Stiftung\n// SPDX-License-Identifier: Apache-2.0\n\nimport { bcs } from '@iota/iota-sdk/bcs';\nimport type {\n    Transaction,\n    TransactionObjectArgument,\n    TransactionObjectInput,\n} from '@iota/iota-sdk/transactions';\nimport { IOTA_CLOCK_OBJECT_ID } from '@iota/iota-sdk/utils';\n\nimport { ALLOWED_METADATA } from './constants.js';\nimport { isNestedSubname, isSubname } from './helpers.js';\nimport type { IotaNamesClient } from './iota-names-client.js';\nimport type { ReceiptParams, RegistrationParams, RenewalParams } from './types.js';\nimport { isValidIotaName, normalizeIotaName } from './utils.js';\n\nexport class IotaNamesTransaction {\n    iotaNamesClient: IotaNamesClient;\n    transaction: Transaction;\n\n    constructor(client: IotaNamesClient, transaction: Transaction) {\n        this.iotaNamesClient = client;\n        this.transaction = transaction;\n    }\n\n    /**\n     * Registers a name.\n     */\n    async register(params: RegistrationParams): Promise<TransactionObjectArgument> {\n        const paymentIntent = this.initRegistration(params.name);\n\n        const couponCodes = params.couponCodes;\n        let discountedPrice: number | null = null;\n\n        if (couponCodes && couponCodes.length > 0) {\n            discountedPrice = await this.iotaNamesClient.calculateDiscountedPrice({\n                coupons: couponCodes,\n                name: params.name,\n                years: 1,\n                isRegistration: true,\n                address: params.address,\n            });\n\n            for (const couponCode of couponCodes) {\n                this.applyCoupon(couponCode, paymentIntent);\n            }\n        }\n\n        const amounts = [discountedPrice ?? this.getBasePrice(paymentIntent)];\n        const payment = this.transaction.splitCoins(this.transaction.object(params.coin), amounts);\n\n        const receipt = this.generateReceipt({\n            paymentIntent,\n            payment,\n            coinConfig: params.coinConfig || this.iotaNamesClient.config.coins.IOTA,\n        });\n\n        return this.finalizeRegister(receipt);\n    }\n\n    /**\n     * Renews an NFT for a number of years.\n     */\n    async renew(params: RenewalParams): Promise<void> {\n        const paymentIntent = this.initRenewal(params.nft, params.years);\n\n        const couponCodes = params.couponCodes;\n        let discountedPrice: number | null = null;\n\n        if (couponCodes && couponCodes.length > 0) {\n            discountedPrice = await this.iotaNamesClient.calculateDiscountedPrice({\n                coupons: couponCodes,\n                name: params.name,\n                years: params.years,\n                isRegistration: false,\n                address: params.address,\n            });\n\n            for (const couponCode of couponCodes) {\n                this.applyCoupon(couponCode, paymentIntent);\n            }\n        }\n\n        const amounts = [discountedPrice ?? this.getBasePrice(paymentIntent)];\n        const payment = this.transaction.splitCoins(this.transaction.object(params.coin), amounts);\n\n        const receipt = this.generateReceipt({\n            paymentIntent,\n            payment,\n            coinConfig: params.coinConfig || this.iotaNamesClient.config.coins.IOTA,\n        });\n        this.finalizeRenew(receipt, params.nft);\n    }\n\n    initRegistration(name: string): TransactionObjectArgument {\n        const config = this.iotaNamesClient.config;\n        return this.transaction.moveCall({\n            target: `${config.packageId}::payment::init_registration`,\n            arguments: [\n                this.transaction.object(config.iotaNamesObjectId),\n                this.transaction.pure.string(name),\n            ],\n        });\n    }\n\n    initRenewal(nft: TransactionObjectInput, years: number): TransactionObjectArgument {\n        const config = this.iotaNamesClient.config;\n        return this.transaction.moveCall({\n            target: `${config.packageId}::payment::init_renewal`,\n            arguments: [\n                this.transaction.object(config.iotaNamesObjectId),\n                this.transaction.object(nft),\n                this.transaction.pure.u8(years),\n            ],\n        });\n    }\n\n    handleBasePayment(\n        paymentIntent: TransactionObjectArgument,\n        payment: TransactionObjectArgument,\n        paymentType: string,\n    ): TransactionObjectArgument {\n        const config = this.iotaNamesClient.config;\n        return this.transaction.moveCall({\n            target: `${config.paymentsPackageId}::payments::handle_base_payment`,\n            arguments: [this.transaction.object(config.iotaNamesObjectId), paymentIntent, payment],\n            typeArguments: [paymentType],\n        });\n    }\n\n    finalizeRegister(receipt: TransactionObjectArgument): TransactionObjectArgument {\n        const config = this.iotaNamesClient.config;\n        return this.transaction.moveCall({\n            target: `${config.packageId}::payment::register`,\n            arguments: [\n                receipt,\n                this.transaction.object(config.iotaNamesObjectId),\n                this.transaction.object.clock(),\n            ],\n        });\n    }\n\n    finalizeRenew(\n        receipt: TransactionObjectArgument,\n        nft: TransactionObjectInput,\n    ): TransactionObjectArgument {\n        const config = this.iotaNamesClient.config;\n        return this.transaction.moveCall({\n            target: `${config.packageId}::payment::renew`,\n            arguments: [\n                receipt,\n                this.transaction.object(config.iotaNamesObjectId),\n                this.transaction.object(nft),\n                this.transaction.object.clock(),\n            ],\n        });\n    }\n\n    getBasePrice(paymentIntent: TransactionObjectArgument): TransactionObjectArgument {\n        const config = this.iotaNamesClient.config;\n        return this.transaction.moveCall({\n            target: `${config.packageId}::payment::request_base_amount`,\n            arguments: [paymentIntent],\n        });\n    }\n\n    applyCoupon(couponCode: string, paymentIntent: TransactionObjectArgument) {\n        const config = this.iotaNamesClient.config;\n        return this.transaction.moveCall({\n            target: `${config.couponsPackageId}::coupon_house::apply_coupon`,\n            arguments: [\n                paymentIntent,\n                this.transaction.object(config.iotaNamesObjectId),\n                this.transaction.pure.string(couponCode),\n                this.transaction.object(IOTA_CLOCK_OBJECT_ID),\n            ],\n        });\n    }\n\n    generateReceipt(params: ReceiptParams): TransactionObjectArgument {\n        const receipt = this.handleBasePayment(\n            params.paymentIntent,\n            params.payment,\n            params.coinConfig.type,\n        );\n        return receipt;\n    }\n\n    /**\n     * Creates a subname.\n     */\n    createSubname({\n        parentNft,\n        name,\n        expirationTimestampMs,\n        allowChildCreation,\n        allowTimeExtension,\n    }: {\n        parentNft: TransactionObjectInput;\n        name: string;\n        expirationTimestampMs: number;\n        allowChildCreation: boolean;\n        allowTimeExtension: boolean;\n    }) {\n        if (!isValidIotaName(name)) throw new Error('Invalid IOTA names');\n        const isParentSubname = isNestedSubname(name);\n        if (!this.iotaNamesClient.config.iotaNamesObjectId)\n            throw new Error('IotaNames Object ID not found');\n        if (!this.iotaNamesClient.config.subnamesPackageId)\n            throw new Error('Subnames package ID not found');\n        if (isParentSubname && !this.iotaNamesClient.config.tempSubnameProxyPackageId)\n            throw new Error('Subnames proxy package ID not found');\n\n        const subNft = this.transaction.moveCall({\n            target: isParentSubname\n                ? `${this.iotaNamesClient.config.tempSubnameProxyPackageId}::subname_proxy::new`\n                : `${this.iotaNamesClient.config.subnamesPackageId}::subnames::new`,\n            arguments: [\n                this.transaction.object(this.iotaNamesClient.config.iotaNamesObjectId),\n                this.transaction.object(parentNft),\n                this.transaction.object(IOTA_CLOCK_OBJECT_ID),\n                this.transaction.pure.string(normalizeIotaName(name, 'dot')),\n                this.transaction.pure.u64(expirationTimestampMs),\n                this.transaction.pure.bool(!!allowChildCreation),\n                this.transaction.pure.bool(!!allowTimeExtension),\n            ],\n        });\n\n        return subNft;\n    }\n\n    /**\n     * Builds the PTB to create a leaf subname.\n     * Parent can be a `NameRegistration` or a `SubnameRegistration` object.\n     * Can be passed in as an ID or a TransactionArgument.\n     */\n    createLeafSubname({\n        parentNft,\n        name,\n        targetAddress,\n    }: {\n        parentNft: TransactionObjectInput;\n        name: string;\n        targetAddress: string;\n    }) {\n        if (!isValidIotaName(name)) throw new Error('Invalid IOTA names');\n        const isParentSubname = isNestedSubname(name);\n        if (!this.iotaNamesClient.config.iotaNamesObjectId)\n            throw new Error('IOTA-Names Object ID not found');\n        if (!this.iotaNamesClient.config.subnamesPackageId)\n            throw new Error('Subnames package ID not found');\n        if (isParentSubname && !this.iotaNamesClient.config.tempSubnameProxyPackageId)\n            throw new Error('Subnames proxy package ID not found');\n\n        this.transaction.moveCall({\n            target: isParentSubname\n                ? `${this.iotaNamesClient.config.tempSubnameProxyPackageId}::subname_proxy::new_leaf`\n                : `${this.iotaNamesClient.config.subnamesPackageId}::subnames::new_leaf`,\n            arguments: [\n                this.transaction.object(this.iotaNamesClient.config.iotaNamesObjectId),\n                this.transaction.object(parentNft),\n                this.transaction.object(IOTA_CLOCK_OBJECT_ID),\n                this.transaction.pure.string(normalizeIotaName(name, 'dot')),\n                this.transaction.pure.address(targetAddress),\n            ],\n        });\n    }\n\n    /**\n     * Removes a leaf subname.\n     */\n    removeLeafSubname({ parentNft, name }: { parentNft: TransactionObjectInput; name: string }) {\n        if (!isValidIotaName(name)) throw new Error('Invalid IOTA names');\n        const isParentSubname = isNestedSubname(name);\n        if (!isSubname(name)) throw new Error('This can only be invoked for subnames');\n        if (!this.iotaNamesClient.config.iotaNamesObjectId)\n            throw new Error('IOTA-Names Object ID not found');\n        if (!this.iotaNamesClient.config.subnamesPackageId)\n            throw new Error('Subnames package ID not found');\n        if (isParentSubname && !this.iotaNamesClient.config.tempSubnameProxyPackageId)\n            throw new Error('Subnames proxy package ID not found');\n\n        this.transaction.moveCall({\n            target: isParentSubname\n                ? `${this.iotaNamesClient.config.tempSubnameProxyPackageId}::subname_proxy::remove_leaf`\n                : `${this.iotaNamesClient.config.subnamesPackageId}::subnames::remove_leaf`,\n            arguments: [\n                this.transaction.object(this.iotaNamesClient.config.iotaNamesObjectId),\n                this.transaction.object(parentNft),\n                this.transaction.object(IOTA_CLOCK_OBJECT_ID),\n                this.transaction.pure.string(normalizeIotaName(name, 'dot')),\n            ],\n        });\n    }\n\n    /**\n     * Sets the target address of an NFT.\n     */\n    setTargetAddress({\n        nft, // Can be string or argument\n        address,\n        isSubname,\n    }: {\n        nft: TransactionObjectInput;\n        address?: string;\n        isSubname?: boolean;\n    }) {\n        if (isSubname && !this.iotaNamesClient.config.tempSubnameProxyPackageId)\n            throw new Error('Subnames proxy package ID not found');\n\n        this.transaction.moveCall({\n            target: isSubname\n                ? `${this.iotaNamesClient.config.tempSubnameProxyPackageId}::subname_proxy::set_target_address`\n                : `${this.iotaNamesClient.config.packageId}::controller::set_target_address`,\n            arguments: [\n                this.transaction.object(this.iotaNamesClient.config.iotaNamesObjectId),\n                this.transaction.object(nft),\n                this.transaction.pure(bcs.option(bcs.Address).serialize(address).toBytes()),\n                this.transaction.object(IOTA_CLOCK_OBJECT_ID),\n            ],\n        });\n    }\n\n    /**\n     * Sets a default name for the user.\n     */\n    setDefault(name: string) {\n        if (!isValidIotaName(name)) throw new Error('Invalid IOTA names');\n        if (!this.iotaNamesClient.config.iotaNamesObjectId)\n            throw new Error('IOTA-Names Object ID not found');\n\n        this.transaction.moveCall({\n            target: `${this.iotaNamesClient.config.packageId}::controller::set_reverse_lookup`,\n            arguments: [\n                this.transaction.object(this.iotaNamesClient.config.iotaNamesObjectId),\n                this.transaction.pure.string(normalizeIotaName(name, 'dot')),\n            ],\n        });\n    }\n\n    /**\n     * Unsets a default name for the user.\n     */\n    unsetDefault() {\n        if (!this.iotaNamesClient.config.iotaNamesObjectId)\n            throw new Error('IOTA-Names Object ID not found');\n\n        this.transaction.moveCall({\n            target: `${this.iotaNamesClient.config.packageId}::controller::unset_reverse_lookup`,\n            arguments: [this.transaction.object(this.iotaNamesClient.config.iotaNamesObjectId)],\n        });\n    }\n\n    /**\n     * Edits the setup of a subname.\n     */\n    editSetup({\n        parentNft,\n        name,\n        allowChildCreation,\n        allowTimeExtension,\n    }: {\n        parentNft: TransactionObjectInput;\n        name: string;\n        allowChildCreation: boolean;\n        allowTimeExtension: boolean;\n    }) {\n        if (!isValidIotaName(name)) throw new Error('Invalid IOTA names');\n        const isParentSubname = isNestedSubname(name);\n        if (!this.iotaNamesClient.config.iotaNamesObjectId)\n            throw new Error('IOTA-Names Object ID not found');\n        if (!isParentSubname && !this.iotaNamesClient.config.subnamesPackageId)\n            throw new Error('Subnames package ID not found');\n        if (isParentSubname && !this.iotaNamesClient.config.tempSubnameProxyPackageId)\n            throw new Error('Subnames proxy package ID not found');\n\n        this.transaction.moveCall({\n            target: isParentSubname\n                ? `${this.iotaNamesClient.config.tempSubnameProxyPackageId}::subname_proxy::edit_setup`\n                : `${this.iotaNamesClient.config.subnamesPackageId}::subnames::edit_setup`,\n            arguments: [\n                this.transaction.object(this.iotaNamesClient.config.iotaNamesObjectId),\n                this.transaction.object(parentNft),\n                this.transaction.object(IOTA_CLOCK_OBJECT_ID),\n                this.transaction.pure.string(normalizeIotaName(name, 'dot')),\n                this.transaction.pure.bool(!!allowChildCreation),\n                this.transaction.pure.bool(!!allowTimeExtension),\n            ],\n        });\n    }\n\n    /**\n     * Extends the expiration of a subname.\n     */\n    extendExpiration({\n        nft,\n        expirationTimestampMs,\n    }: {\n        nft: TransactionObjectInput;\n        expirationTimestampMs: number;\n    }) {\n        if (!this.iotaNamesClient.config.iotaNamesObjectId)\n            throw new Error('IOTA-Names Object ID not found');\n        if (!this.iotaNamesClient.config.subnamesPackageId)\n            throw new Error('Subnames package ID not found');\n\n        this.transaction.moveCall({\n            target: `${this.iotaNamesClient.config.subnamesPackageId}::subnames::extend_expiration`,\n            arguments: [\n                this.transaction.object(this.iotaNamesClient.config.iotaNamesObjectId),\n                this.transaction.object(nft),\n                this.transaction.pure.u64(expirationTimestampMs),\n            ],\n        });\n    }\n\n    /**\n     * Sets the user data of an NFT.\n     */\n    setUserData({\n        nft,\n        value,\n        key,\n        isSubname,\n    }: {\n        nft: TransactionObjectInput;\n        value: string;\n        key: string;\n        isSubname?: boolean;\n    }) {\n        if (!this.iotaNamesClient.config.iotaNamesObjectId)\n            throw new Error('IOTA-Names Object ID not found');\n        if (isSubname && !this.iotaNamesClient.config.tempSubnameProxyPackageId)\n            throw new Error('Subnames proxy package ID not found');\n\n        if (!Object.values(ALLOWED_METADATA).some((x) => x === key)) throw new Error('Invalid key');\n\n        this.transaction.moveCall({\n            target: isSubname\n                ? `${this.iotaNamesClient.config.tempSubnameProxyPackageId}::subname_proxy::set_user_data`\n                : `${this.iotaNamesClient.config.packageId}::controller::set_user_data`,\n            arguments: [\n                this.transaction.object(this.iotaNamesClient.config.iotaNamesObjectId),\n                this.transaction.object(nft),\n                this.transaction.pure.string(key),\n                this.transaction.pure.string(value),\n                this.transaction.object(IOTA_CLOCK_OBJECT_ID),\n            ],\n        });\n    }\n\n    /**\n     * Unsets the user data of an NFT.\n     */\n    unsetUserData({\n        nft,\n        key,\n        isSubname,\n    }: {\n        nft: TransactionObjectInput;\n        key: string;\n        isSubname?: boolean;\n    }) {\n        if (!this.iotaNamesClient.config.iotaNamesObjectId)\n            throw new Error('IOTA-Names Object ID not found');\n        if (isSubname && !this.iotaNamesClient.config.tempSubnameProxyPackageId)\n            throw new Error('Subnames proxy package ID not found');\n\n        if (!Object.values(ALLOWED_METADATA).some((x) => x === key)) throw new Error('Invalid key');\n\n        this.transaction.moveCall({\n            target: isSubname\n                ? `${this.iotaNamesClient.config.tempSubnameProxyPackageId}::subname_proxy::unset_user_data`\n                : `${this.iotaNamesClient.config.packageId}::controller::unset_user_data`,\n            arguments: [\n                this.transaction.object(this.iotaNamesClient.config.iotaNamesObjectId),\n                this.transaction.object(nft),\n                this.transaction.pure.string(key),\n                this.transaction.object(IOTA_CLOCK_OBJECT_ID),\n            ],\n        });\n    }\n\n    /**\n     * Burns an expired NFT to collect storage rebates.\n     */\n    burnExpired({ nft, isSubname }: { nft: TransactionObjectInput; isSubname?: boolean }) {\n        if (!this.iotaNamesClient.config.iotaNamesObjectId)\n            throw new Error('IOTA-Names Object ID not found');\n\n        this.transaction.moveCall({\n            target: `${this.iotaNamesClient.config.packageId}::controller::${\n                isSubname ? 'burn_expired_subname' : 'burn_expired'\n            }`, // Update this\n            arguments: [\n                this.transaction.object(this.iotaNamesClient.config.iotaNamesObjectId),\n                this.transaction.object(nft),\n                this.transaction.object(IOTA_CLOCK_OBJECT_ID),\n            ],\n        });\n    }\n}\n"],
  "mappings": "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",
  "names": ["isSubname"]
}
